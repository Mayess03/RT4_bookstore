<mat-card>
  <!-- Book Image with fallback -->
  <img mat-card-image 
       [src]="book().coverImage || book().imageUrl" 
       [alt]="book().title"
       (error)="onImageError($event)">
  
  <!-- Book Info -->
  <mat-card-header>
    <mat-card-title>{{ book().title }}</mat-card-title>
    <mat-card-subtitle>{{ book().author }}</mat-card-subtitle>
  </mat-card-header>
  
  <mat-card-content>
    @if (book().description) {
      <p class="description">
        {{ book().description }}
      </p>
    }
    <p class="price">{{ book().price | currency:'EUR' }}</p>
    <p class="stock" [class.out-of-stock]="book().stock === 0">
      <mat-icon>{{ book().stock > 0 ? 'check_circle' : 'cancel' }}</mat-icon>
      {{ book().stock > 0 ? 'In Stock (' + book().stock + ')' : 'Out of Stock' }}
    </p>
  </mat-card-content>
  
  <!-- Actions -->
  <mat-card-actions>
    <button mat-button color="primary" [routerLink]="['/books', book().id]">
      <mat-icon>visibility</mat-icon>
      Details
    </button>
    <button mat-raised-button 
            color="primary" 
            (click)="onAddToCart()"
            [disabled]="book().stock === 0 || isLoading()">
      @if (isLoading()) {
        <mat-icon class="animate-spin mr-1">hourglass_empty</mat-icon>
        Adding...
      } @else {
        <mat-icon>shopping_cart</mat-icon>
        Add to Cart
      }
    </button>
  </mat-card-actions>
</mat-card>
