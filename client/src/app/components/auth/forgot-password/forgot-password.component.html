<div class="auth-bg d-flex align-items-center py-5">
  <div class="container">
    <div class="row justify-content-center align-items-stretch g-4">

      <div class="col-12 col-lg-5">
        <div class="card auth-card p-4 p-md-5 h-100">

          <h2 class="fw-bold mb-1">Change Password</h2>
          <p class="text-muted mb-4">Enter your email and new password</p>

          <form (ngSubmit)="submit(form)" #form="ngForm" novalidate>

            <div class="mb-3">
              <label>Email</label>
              <input class="form-control auth-input"
                     name="email"
                     [(ngModel)]="model.email"
                     #email="ngModel"
                     required email>
              @if (email.touched && email.invalid) {
                <div class="text-danger small">Invalid email</div>
              }
            </div>

            <div class="mb-3">
              <label>New password</label>
              <input class="form-control auth-input"
                     type="password"
                     name="newPassword"
                     [(ngModel)]="model.newPassword"
                     #newPassword="ngModel"
                     required minlength="6">
            </div>

            <div class="mb-3">
              <label>Confirm password</label>
              <input class="form-control auth-input"
                     type="password"
                     name="confirmPassword"
                     [(ngModel)]="model.confirmPassword"
                     #confirmPassword="ngModel"
                     required minlength="6">

              @if (model.newPassword && model.confirmPassword && model.newPassword !== model.confirmPassword) {
                <div class="text-danger small">Passwords do not match</div>
              }
            </div>

            @if (success()) {
              <div class="alert alert-success">{{ success() }}</div>
            }

            @if (error()) {
              <div class="alert alert-danger">{{ error() }}</div>
            }

            <button class="btn btn-warning w-100 auth-btn"
                    [disabled]="form.invalid || loading()">
              @if (loading()) { Updating... } @else { Change password }
            </button>

            <div class="text-center mt-3">
              <a routerLink="/auth/login">Back to login</a>
            </div>

          </form>

        </div>
      </div>

      <div class="col-lg-7 d-none d-lg-block">
        <div class="img-box h-100 rounded-4"></div>
      </div>

    </div>
  </div>
</div>
